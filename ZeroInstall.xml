<?xml version="1.0" ?>
<interface xmlns="http://zero-install.sourceforge.net/2004/injector/interface"
           xmlns:compile="http://zero-install.sourceforge.net/2006/namespaces/0compile">
  <name>0install</name>
  <summary>decentralised installation system</summary>
  <description>
Zero Install is a decentralised cross-platform software installation
system available under the LGPL. It allows software developers to publish
programs directly from their own web-sites, while supporting features familiar
from centralised distribution repositories such as shared libraries, automatic
updates and digital signatures. It is intended to complement, rather than
replace, the operating system's package management. 0install packages never
interfere with those provided by the distribution.
</description>

  <homepage>http://0install.net/</homepage>

  <icon href="http://0install.net/feed_icons/ZeroInstall.png" type="image/png"/>

  <feed-for interface="http://0install.net/2007/interfaces/ZeroInstall.xml"/>
  <category>System</category>

  <release:management xmlns:release="http://zero-install.sourceforge.net/2007/namespaces/0release">
    <!-- Update the copy of the version number -->
    <release:update-version path='ocaml/zeroinstall/about.ml'>^let version = "(.*)"$</release:update-version>
    <release:update-version path='zeroinstall/__init__.py'>^version = '(.*)'$</release:update-version>
    <release:update-version path='zeroinstall/0launch-gui/gui.py'>^version = '(.*)'$</release:update-version>
    <release:action phase="generate-archive">rm .gitignore; make translations</release:action>
  </release:management>

  <group license="OSI Approved :: GNU Lesser General Public License (LGPL)" arch='*-src'>
    <command name='compile'>
      <runner interface='http://repo.roscidus.com/devel/make'>
	<arg>-f</arg>
	<arg>${SRCDIR}/Makefile</arg>
	<arg>SRCDIR=${SRCDIR}</arg>
	<arg>BUILDDIR=${BUILDDIR}</arg>
	<arg>DISTDIR=${DISTDIR}</arg>
      </runner>

      <compile:implementation main="0launch" arch='*-*'>
	<command name="run" path="0launch">
	  <runner interface="http://repo.roscidus.com/python/python"/>
	</command>

	<command name="0install" path="0install.ml">
	  <runner interface="http://repo.roscidus.com/ocaml/ocaml-runtime">
	    <version not-before='4.0' before='4.1'/>
	  </runner>
	</command>

	<requires interface="http://repo.roscidus.com/security/gnupg">
	  <executable-in-var name="ZEROINSTALL_GPG"/>
	</requires>

	<requires interface="http://repo.roscidus.com/python/python" version="2.6..!3 | 3.2.2.."/>

	<requires interface="http://repo.roscidus.com/python/python-gobject" os="POSIX"/>

	<requires interface="http://0install.net/2013/interfaces/0install-windows-support.xml" os="Windows">
	  <environment insert="runenv.exe" mode="replace" name="ZEROINSTALL_RUNENV"/>
	  <environment insert="" name="CAML_LD_LIBRARY_PATH"/>
	</requires>
      </compile:implementation>
    </command>

    <!-- Need to add support to 0test for testing source code.
    <command name="test" path="tests/testall.py">
      <runner interface="http://repo.roscidus.com/python/python">
	<arg>-tt</arg>
      </runner>
    </command>
    -->

    <implementation id="." version="2.3.3-post"/>
  </group>
</interface>
